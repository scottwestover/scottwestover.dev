<!doctype html><html class=no-js lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>Solitaire HTML5 Game Tutorial With Phaser 3 Part 2: Game Layout - Scott Westover</title><script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="Solitaire HTML5 Game Tutorial With Phaser 3 Part 2: Game Layout"><meta property="og:description" content="In this tutorial series, we’ll be looking at how to recreate the game Solitaire using the Phaser 3 framework. Here’s an example of what the final game should look like:
Previously, in part 1 , we reviewed the rules and game play of the game Solitaire, setup our project files, and loaded in the assets we will need for our game.
In part 2 of this series, we are going to start building out the layout of our game."><meta property="og:type" content="article"><meta property="og:url" content="https://scottwestover.dev/post/2024/08/solitaire-phaser-3-tutorial-2/"><meta property="article:section" content="post"><meta property="article:published_time" content="2023-05-04T16:00:02+00:00"><meta property="article:modified_time" content="2023-05-04T16:00:02+00:00"><meta itemprop=name content="Solitaire HTML5 Game Tutorial With Phaser 3 Part 2: Game Layout"><meta itemprop=description content="In this tutorial series, we’ll be looking at how to recreate the game Solitaire using the Phaser 3 framework. Here’s an example of what the final game should look like:
Previously, in part 1 , we reviewed the rules and game play of the game Solitaire, setup our project files, and loaded in the assets we will need for our game.
In part 2 of this series, we are going to start building out the layout of our game."><meta itemprop=datePublished content="2023-05-04T16:00:02+00:00"><meta itemprop=dateModified content="2023-05-04T16:00:02+00:00"><meta itemprop=wordCount content="2584"><meta itemprop=keywords content="HTML5,Game Development,TypeScript,Tutorial,Solitaire,PhaserJS,Phaser3,"><meta name=twitter:card content="summary"><meta name=twitter:title content="Solitaire HTML5 Game Tutorial With Phaser 3 Part 2: Game Layout"><meta name=twitter:description content="In this tutorial series, we’ll be looking at how to recreate the game Solitaire using the Phaser 3 framework. Here’s an example of what the final game should look like:
Previously, in part 1 , we reviewed the rules and game play of the game Solitaire, setup our project files, and loaded in the assets we will need for our game.
In part 2 of this series, we are going to start building out the layout of our game."><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Scott Westover" rel=home><div class="logo__item logo__text"><div class=logo__title>Scott Westover</div><div class=logo__tagline>A Developer's Blog</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/courses/><span class=menu__text>Courses</span></a></li><li class=menu__item><a class=menu__link href=/about/><span class=menu__text>About Me</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>Solitaire HTML5 Game Tutorial With Phaser 3 Part 2: Game Layout</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2023-05-04T16:00:02Z>May 04, 2023</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=/categories/html5/ rel=category>HTML5</a>, <a class=meta__link href=/categories/game-development/ rel=category>Game Development</a>, <a class=meta__link href=/categories/typescript/ rel=category>TypeScript</a>, <a class=meta__link href=/categories/tutorial/ rel=category>Tutorial</a>, <a class=meta__link href=/categories/solitaire/ rel=category>Solitaire</a>, <a class=meta__link href=/categories/phaserjs/ rel=category>PhaserJS</a>, <a class=meta__link href=/categories/phaser3/ rel=category>Phaser3</a></span></div></div></header><figure class="post__thumbnail thumbnail"><img class=thumbnail__image src=/post/2024/08/solitaire-phaser-3-tutorial-2/images/solitaire-phaser-3-tutorial-2-thumbnail.png alt="Solitaire HTML5 Game Tutorial With Phaser 3 Part 2: Game Layout"></figure><div class="content post__content clearfix"><p>In this tutorial series, we’ll be looking at how to recreate the game Solitaire using the Phaser 3 framework. Here’s an example of what the final game should look like:</p><p><img src=../../../../../static/img/phaser-3-solitaire-tutorial/gameplay.gif alt="Phaser Solitaire Gameplay"></p><p>Previously, in
<a href=/post/2024/08/solitaire-phaser-3-tutorial-1/>part 1</a>
, we reviewed the rules and game play of the game Solitaire, setup our project files, and loaded in the assets we will need for our game.</p><p>In part 2 of this series, we are going to start building out the layout of our game.</p><h2 id=create-draw-pile>Create Draw Pile</h2><p>So now that we have loaded in our assets we will use for our game, and we have seen how we can render out image game objects in our Phaser Scene, we are going to start building the four different card piles that make up our game area. To get started, we will focus on the draw pile.</p><p>For the card draw pile, this will be made up of two different game object types, a basic Rectangle game object and multiple Image game objects. The Rectangle game object is one of the basic shape game objects that is built in Phaser, and this can be used for quickly creating a rectangle in our game. For our card draw pile, we will be rendering out a simple rectangle to show were the card draw pile is placed in our game. When there is no cards in the card draw pile, this will be visible to the player and later on, the player will be able to click in that area to shuffle back in the discard cards. When there are cards in the draw card pile, these will be rendered on top of the rectangle.</p><p>To get started with the code changes, add the following code to the top of the <code>GameScene</code> class in the <code>src/scenes/game-scene.ts</code> file:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#75715e>// used for drawing out game objects for debugging our player input
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>DEBUG</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>// the scale factor that will be applied to our card image game objects
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>SCALE</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1.5</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>// the frame of the card spritesheet that represents the back of a card
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>CARD_BACK_FRAME</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>52</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>// the x &amp; y positions of were the foundation piles will be placed in our game area
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>FOUNDATION_PILE_X_POSITIONS</span> <span style=color:#f92672>=</span> [<span style=color:#ae81ff>360</span>, <span style=color:#ae81ff>425</span>, <span style=color:#ae81ff>490</span>, <span style=color:#ae81ff>555</span>];
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>FOUNDATION_PILE_Y_POSITION</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>// the x &amp; y position of were the discard pile will be placed in our game area
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>DISCARD_PILE_X_POSITION</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>85</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>DISCARD_PILE_Y_POSITION</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>// the x &amp; y position of were the draw pile will be placed in our game area
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>DRAW_PILE_X_POSITION</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>DRAW_PILE_Y_POSITION</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>// the x &amp; y position of were the tableau pile will be placed in our game area
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>TABLEAU_PILE_X_POSITION</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>40</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>TABLEAU_PILE_Y_POSITION</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>92</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>// the starting frame of the card suit in the card spritesheet that represents the various cards
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>SUIT_FRAMES</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>HEART</span>: <span style=color:#66d9ef>26</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>DIAMOND</span>: <span style=color:#66d9ef>13</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>SPADE</span>: <span style=color:#66d9ef>39</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>CLUB</span>: <span style=color:#66d9ef>0</span>,
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><p>In the code above, we are creating a number of constant variables that we will use in throughout our code. Please see the comments for how each variable will be used. Next, replace all of the code in the <code>create</code> method with the following code:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#a6e22e>create</span>()<span style=color:#f92672>:</span> <span style=color:#66d9ef>void</span> {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// setup game objects based on solitaire game state
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>this</span>.<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>createDrawPile</span>();
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>and then at the bottom of the <code>GameScene</code> class, add the following code:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>createDrawPile</span>()<span style=color:#f92672>:</span> <span style=color:#66d9ef>void</span> {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// create outline for pile
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>this</span>.<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>drawCardLocationBox</span>(<span style=color:#a6e22e>DRAW_PILE_X_POSITION</span>, <span style=color:#a6e22e>DRAW_PILE_Y_POSITION</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>drawCardLocationBox</span>(<span style=color:#a6e22e>x</span>: <span style=color:#66d9ef>number</span>, <span style=color:#a6e22e>y</span>: <span style=color:#66d9ef>number</span>)<span style=color:#f92672>:</span> <span style=color:#66d9ef>void</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>add</span>.<span style=color:#a6e22e>rectangle</span>(<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>y</span>, <span style=color:#ae81ff>56</span>, <span style=color:#ae81ff>78</span>).<span style=color:#a6e22e>setOrigin</span>(<span style=color:#ae81ff>0</span>).<span style=color:#a6e22e>setStrokeStyle</span>(<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>0x000000</span>, <span style=color:#ae81ff>0.5</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>When your game refreshes in the browser, we should see a new black rectangle being rendered in our game:</p><p><img src=./images/solitaire-phaser-3-tutorial-2-1.png alt="Draw pile outline"></p><p>In the code above, we created two new <code>private</code> methods <code>#createDrawPile</code> and <code>#drawCardLocationBox</code>. The <code>#drawCardLocationBox</code> method is responsible for creating the Rectangle game object, which is created by using the <code>.rectangle</code> on the Phaser Scene Game Object Factory, and in this method we can pass the following arguments:</p><ul><li><strong>x</strong>: the <code>x</code> position of the game object that will be added to the current Phaser Scene instance</li><li><strong>y</strong>: the <code>y</code> position of the game object that will be added to the current Phaser Scene instance</li><li><strong>width</strong>: the width of the rectangle</li><li><strong>height</strong>: the height of the rectangle</li><li><strong>fillColor</strong>: the color the rectangle will be filled with</li><li><strong>fillAlpha</strong>: the alpha the rectangle will be filled with</li></ul><p>In our code we are omitting the last two arguments, which allows us to draw our rectangle shape with no fill. Finally, we call the <code>setStrokeStyle</code> method to draw a border around our Rectangle game object. This method allows us to pass the <code>size</code> of the board, the color, and the alpha of the border line.</p><p>Next, we need to create the cards in our draw pile, and we will store a reference of these Image game objects in our class. To do this, add the following code at the top of our <code>GameScene</code> class above the <code>constructor</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#75715e>// keeps track of the card game objects in our draw pile (will have 3 game objects)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>drawPileCards</span><span style=color:#f92672>!:</span> <span style=color:#a6e22e>Phaser</span>.<span style=color:#a6e22e>GameObjects</span>.<span style=color:#a6e22e>Image</span>[];
</span></span></code></pre></div><p>Then, add the following code to the bottom of the <code>#createDrawPile</code> method:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#75715e>// create initial draw pile game object cards
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>this</span>.<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>drawPileCards</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>3</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>this</span>.<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>drawPileCards</span>.<span style=color:#a6e22e>push</span>(<span style=color:#66d9ef>this</span>.<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>createCard</span>(<span style=color:#a6e22e>DRAW_PILE_X_POSITION</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>5</span>, <span style=color:#a6e22e>DRAW_PILE_Y_POSITION</span>));
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Finally, at the bottom of the <code>GameScene</code> class, add the following code:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>createCard</span>(<span style=color:#a6e22e>x</span>: <span style=color:#66d9ef>number</span>, <span style=color:#a6e22e>y</span>: <span style=color:#66d9ef>number</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Phaser</span>.<span style=color:#a6e22e>GameObjects</span>.<span style=color:#a6e22e>Image</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>add</span>.<span style=color:#a6e22e>image</span>(<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>y</span>, <span style=color:#a6e22e>ASSET_KEYS</span>.<span style=color:#a6e22e>CARDS</span>, <span style=color:#a6e22e>CARD_BACK_FRAME</span>).<span style=color:#a6e22e>setOrigin</span>(<span style=color:#ae81ff>0</span>).<span style=color:#a6e22e>setScale</span>(<span style=color:#a6e22e>SCALE</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>When your game refreshes in the browser, we should see the new cards in the draw pile location:</p><p><img src=./images/solitaire-phaser-3-tutorial-2-2.png alt="Draw pile cards"></p><p>In the code above, we first created a new private property, <code>#drawPileCards</code>, which is an array that will be used to keep track of our Image game objects in the draw pile. For the time being, we won&rsquo;t be doing anything with this array besides adding the game objects, but we will reference these objects later in our code. We then created a new private method <code>#createCard</code>, which is used to create an Image game object. When we create the Image game object, we are using the <code>setScale</code> method to scale up the size of our game object. By default, game objects will have a scale of <code>1</code> for both the <code>x</code> and <code>y</code> values. When we call <code>setScale</code>, we have the option to pass two values, one for <code>x</code> and one for <code>y</code>, and if we only pass one value, this value will be used for both the <code>x</code> and <code>y</code> values.</p><p>Finally, in the <code>#createDrawPile</code> method, we create three new Image game objects by calling the new new <code>#createCard</code> method. By calling this method in the <code>for</code> loop, we can use the <code>index</code> of the loop to modify the <code>x</code> position of the game objects to get the effect of the cards being stacked on top of each other. For the draw card pile, we will only create a max of 3 Image game objects to represent our deck, and as we draw new cards in our game, we will update the card textures in our discard pile to reflect the cards that were just drawn. Later on, as we draw cards from our draw pile, once we get down to only 2, 1, or 0 cards, we will update our 3 Image game objects that were created here.</p><h2 id=create-discard-pile>Create Discard Pile</h2><p>For the discard card pile, this will be very similar to the logic we added for the draw card pile. To get started we will create a private property to keep track of the Image game objects that will be created. At the top of the <code>GameScene</code> class, add the following code below the <code>#drawPileCards</code> property:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#75715e>// keeps track of the card game objects in our discard pile (will have 2 game objects)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>discardPileCards</span><span style=color:#f92672>!:</span> <span style=color:#a6e22e>Phaser</span>.<span style=color:#a6e22e>GameObjects</span>.<span style=color:#a6e22e>Image</span>[];
</span></span></code></pre></div><p>Next in the <code>create</code> method, add the following code to the bottom of the method:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>this</span>.<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>createDiscardPile</span>();
</span></span></code></pre></div><p>Now, add the following code to the <code>GameScene</code> class:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>createDiscardPile</span>()<span style=color:#f92672>:</span> <span style=color:#66d9ef>void</span> {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// create outline for pile
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>this</span>.<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>drawCardLocationBox</span>(<span style=color:#a6e22e>DISCARD_PILE_X_POSITION</span>, <span style=color:#a6e22e>DISCARD_PILE_Y_POSITION</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// create initial discard pile game object cards, we will only need two game objects, which will represent the two most recently drawn cards
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#75715e>// at the start of the game, these will not be visible until the player draws a new card
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>this</span>.<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>discardPileCards</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>bottomCard</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>createCard</span>(<span style=color:#a6e22e>DISCARD_PILE_X_POSITION</span>, <span style=color:#a6e22e>DISCARD_PILE_Y_POSITION</span>).<span style=color:#a6e22e>setVisible</span>(<span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>topCard</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>createCard</span>(<span style=color:#a6e22e>DISCARD_PILE_X_POSITION</span>, <span style=color:#a6e22e>DISCARD_PILE_Y_POSITION</span>).<span style=color:#a6e22e>setVisible</span>(<span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>this</span>.<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>discardPileCards</span>.<span style=color:#a6e22e>push</span>(<span style=color:#a6e22e>bottomCard</span>, <span style=color:#a6e22e>topCard</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>When your game refreshes in the browser, we should see the new discard pile location:</p><p><img src=./images/solitaire-phaser-3-tutorial-2-3.png alt="Discard pile"></p><p>In the code above, we first created another Rectangle game object that shows were the discard pile of cards will be placed in our game. By default, when there are no cards in this pile, the empty rectangle will be shown to the player. After this, we created two new Image game objects and stored these game objects in the <code>#discardPileCards</code> array. One new thing we are doing when creating these two game objects is that we are calling the <code>setVisible</code> method. This method allows us to control if a game object will be rendered in our scene. Since we are setting this value to <code>false</code>, that is why we cannot see our card images in our scene. If we toggle this value to be <code>true</code>, we should then see the card in the discard pile.</p><p><img src=./images/solitaire-phaser-3-tutorial-2-4.png alt="Discard pile card"></p><p>For the discard pile, even though there will be no cards in the pile when the game starts, we will still create our two Image game objects. By making these invisible when the game starts, we can re-use these game objects later. Now, for our discard pile, we will only end up showing up to two cards at a time in our game, the two most recently drawn cards. Due to this, we will end up re-using these two game objects by updating the textures on these objects and by setting the visibility on these game objects.</p><p>Here is an example of how we will be showing the two cards in our discard pile:</p><p><img src=./images/solitaire-phaser-3-tutorial-2-5.gif alt="Discard pile demo"></p><h2 id=create-foundation-piles>Create Foundation Piles</h2><p>For the foundation piles, the logic will be similar to the logic we have added so far. The main thing for the foundation piles is that we will need four unique piles in our game, one for each card suit. To get started we will create a private property to keep track of the Image game objects that will be created. At the top of the <code>GameScene</code> class, add the following code below the <code>#discardPileCards</code> property:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#75715e>// keeps track of the card game objects in each of the foundation piles (4 game objects)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>foundationPileCards</span><span style=color:#f92672>!:</span> <span style=color:#a6e22e>Phaser</span>.<span style=color:#a6e22e>GameObjects</span>.<span style=color:#a6e22e>Image</span>[];
</span></span></code></pre></div><p>Next in the <code>create</code> method, add the following code to the bottom of the method:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>this</span>.<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>createFoundationPiles</span>();
</span></span></code></pre></div><p>Now, add the following code to the <code>GameScene</code> class:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>createFoundationPiles</span>()<span style=color:#f92672>:</span> <span style=color:#66d9ef>void</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>this</span>.<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>foundationPileCards</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// create outline for each foundation pile
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>FOUNDATION_PILE_X_POSITIONS</span>.<span style=color:#a6e22e>forEach</span>((<span style=color:#a6e22e>x</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>drawCardLocationBox</span>(<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>FOUNDATION_PILE_Y_POSITION</span>);
</span></span><span style=display:flex><span>    <span style=color:#75715e>// create phaser game object for each pile, these will not be visible at game start
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// but once we add the ace to the pile, we will make this card visible
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>card</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>createCard</span>(<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>FOUNDATION_PILE_Y_POSITION</span>).<span style=color:#a6e22e>setVisible</span>(<span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>foundationPileCards</span>.<span style=color:#a6e22e>push</span>(<span style=color:#a6e22e>card</span>);
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>When your game refreshes in the browser, we should see the new foundation piles:</p><p><img src=./images/solitaire-phaser-3-tutorial-2-6.png alt="Foundation piles"></p><p>In the code above, we created 4 new card piles, one for each card suit in our game. For each pile, we created an outline of were the pile will be placed in the game and we created a new Image game object at that location, which is hidden by default. For our foundation pile, we will only need 1 Image game object to represent our card pile, and as we add cards to the foundation pile, we will just update the Image game object texture to reflect the card that was just added to that pile.</p><p><img src=./images/solitaire-phaser-3-tutorial-2-7.gif alt="Foundation piles demo"></p><h2 id=create-tableau-piles>Create Tableau Piles</h2><p>For the last part of our game layout, we need to create the 7 tableau card piles. For the tableau card piles, we need to build 7 card piles were the first pile has 1 card, the second pile has 2 cards, the 3rd pile has 3 cards, and so on until the final pile, which will have 7 cards. Now, for these piles, the player will be able to see how many cards are in each pile, and so we will be creating an Image game object to represent each of these cards. One last thing to note is that the last card in each pile will be visible to the player, however for the time being we will just show the back of the last card.</p><p>So to create our card piles, we will need to add the following code to our <code>GameScene</code> class. At the top of the <code>GameScene</code> class, add the following code below the <code>#foundationPileCards</code> property:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#75715e>// keeps track of the card game object containers for each tableau pile (7 game objects)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>tableauContainers</span><span style=color:#f92672>!:</span> <span style=color:#a6e22e>Phaser</span>.<span style=color:#a6e22e>GameObjects</span>.<span style=color:#a6e22e>Container</span>[];
</span></span></code></pre></div><p>Next in the <code>create</code> method, add the following code to the bottom of the method:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>this</span>.<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>createTableauPiles</span>();
</span></span></code></pre></div><p>Now, add the following code to the <code>GameScene</code> class:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>createTableauPiles</span>()<span style=color:#f92672>:</span> <span style=color:#66d9ef>void</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>this</span>.<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>tableauContainers</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>7</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>x</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>TABLEAU_PILE_X_POSITION</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>85</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>tableauContainer</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>add</span>.<span style=color:#a6e22e>container</span>(<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>TABLEAU_PILE_Y_POSITION</span>, []);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>tableauContainers</span>.<span style=color:#a6e22e>push</span>(<span style=color:#a6e22e>tableauContainer</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>j</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>j</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>; <span style=color:#a6e22e>j</span> <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>cardGameObject</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>createCard</span>(<span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>j</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>20</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>tableauContainer</span>.<span style=color:#a6e22e>add</span>(<span style=color:#a6e22e>cardGameObject</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>When your game refreshes in the browser, we should see the new tableau piles:</p><p><img src=./images/solitaire-phaser-3-tutorial-2-8.png alt="Tableau piles"></p><p>In the code above, we created a new private property called <code>#tableauContainers</code>, which will be an array of Phaser Container game objects. In Phaser, a container is a special type of game object that allows you to place other game objects inside it, and then you can move all of those game objects around by moving the container game object itself. What is unique about a container is that when you place game objects inside the container, the are position relative to the container position. For example, if we placed a container game object at position <code>50,50</code>, and then we created a new Image game object at position <code>0,0</code>, and placed this game object within the container, then the Image game object would appear at the container game objects position. There is more you can do with Container game objects, but for now, we are just using our Container game objects to align our cards in our piles.</p><p>Next, we created a new private method called <code>#createTableauPiles</code>. In this method, we create 7 Container game objects and line these up on our game board by using the index of our <code>for</code> loop. We then created a nested <code>for</code> loop to allow us to create the number of cards that we need in each pile, and so as we go through each iteration of our loop, we will create more cards for each card pile. Finally, we place each of our card Image game objects in each of the <code>tableauContainer</code> game objects that were created.</p><p>With all of the code changes that we have made so far, our game should now look like this:</p><p><img src=./images/solitaire-phaser-3-tutorial-2-9.png alt="Solitaire game layout"></p><h2 id=summary>Summary</h2><p>All right, with those last changes, that brings an end to this part of the tutorial. In this part of the tutorial, we started to create Phaser game objects and created the main layout for our Solitaire game.</p><p>You can find the completed source code for this article here on GitHub:
<a href=https://github.com/devshareacademy/phaser-3-solitaire-tutorial/tree/game_layout target=_blank rel=noopener>Part 2 Source Code</a></p><p>If you run into any issues, please reach out via
<a href=https://github.com/devshareacademy/phaser-3-solitaire-tutorial/discussions target=_blank rel=noopener>GitHub Discussions</a>
, or leave a comment down below.</p><p>In
<a href=/post/2024/08/solitaire-phaser-3-tutorial-3/>part 3</a>
of this series, we will start to add support for handling player input in our game.</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/html5/ rel=tag>HTML5</a></li><li class=tags__item><a class="tags__link btn" href=/tags/game-development/ rel=tag>Game Development</a></li><li class=tags__item><a class="tags__link btn" href=/tags/typescript/ rel=tag>TypeScript</a></li><li class=tags__item><a class="tags__link btn" href=/tags/tutorial/ rel=tag>Tutorial</a></li><li class=tags__item><a class="tags__link btn" href=/tags/solitaire/ rel=tag>Solitaire</a></li><li class=tags__item><a class="tags__link btn" href=/tags/phaserjs/ rel=tag>PhaserJS</a></li><li class=tags__item><a class="tags__link btn" href=/tags/phaser3/ rel=tag>Phaser3</a></li></ul></div></footer></article></main><div class="authorbox clearfix"><figure class=authorbox__avatar><img alt="Scott Westover avatar" src=https://secure.gravatar.com/avatar/d5b6863a31baa2c531949202b1de9c82 class=avatar height=90 width=90></figure><div class=authorbox__header><span class=authorbox__name>About Scott Westover</span></div><div class=authorbox__description>Scott Westover is a Software Developer who loves coding, writing tutorials, participating in game jams, and learning about new technologies. When he is not coding, he is either spending time with his wife and two kids or is reading a great book. Scott is looking to form connections and share his knowledge.</div></div><nav class="pager flex"><div class="pager__item pager__item--prev"><a class=pager__link href=/post/2024/08/solitaire-phaser-3-tutorial-3/ rel=prev><span class=pager__subtitle>«&#8201;Previous</span><p class=pager__title>Solitaire HTML5 Game Tutorial With Phaser 3 Part 3: Player Input</p></a></div><div class="pager__item pager__item--next"><a class=pager__link href=/post/2024/08/solitaire-phaser-3-tutorial-1/ rel=next><span class=pager__subtitle>Next&#8201;»</span><p class=pager__title>Solitaire HTML5 Game Tutorial With Phaser 3 Part 1: Project Setup</p></a></div></nav><section class=comments><div id=gitment-comments></div></section><script src=https://utteranc.es/client.js repo=scottwestover/scottwestover.dev issue-term=pathname theme=github-light crossorigin=anonymous async></script></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2024 Scott Westover.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>