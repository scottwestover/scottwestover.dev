<!doctype html><html class=no-js lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>Build A Connect Four Library In TypeScript - Part 2 - Scott Westover</title><script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="Build A Connect Four Library In TypeScript - Part 2"><meta property="og:description" content="In this series, we will go over how to create a reusable TypeScript class that can be used to build the game Connect Four, and in a future series we will see how we can use this library to create implementations of the Connect Four game for the CLI and the web.
Previously, in part 1 , we reviewed the rules and game play of the game Connect Four and we started to build out the initial ConnectFour class by adding the properties and methods that will be needed."><meta property="og:type" content="article"><meta property="og:url" content="https://scottwestover.dev/post/2023/01/build-a-connect-four-library-in-typescript-part-2/"><meta property="article:section" content="post"><meta property="article:published_time" content="2023-01-17T06:00:02+00:00"><meta property="article:modified_time" content="2023-01-17T06:00:02+00:00"><meta itemprop=name content="Build A Connect Four Library In TypeScript - Part 2"><meta itemprop=description content="In this series, we will go over how to create a reusable TypeScript class that can be used to build the game Connect Four, and in a future series we will see how we can use this library to create implementations of the Connect Four game for the CLI and the web.
Previously, in part 1 , we reviewed the rules and game play of the game Connect Four and we started to build out the initial ConnectFour class by adding the properties and methods that will be needed."><meta itemprop=datePublished content="2023-01-17T06:00:02+00:00"><meta itemprop=dateModified content="2023-01-17T06:00:02+00:00"><meta itemprop=wordCount content="2179"><meta itemprop=keywords content="HTML5,Game Development,TypeScript,Tutorial,Connect Four,"><meta name=twitter:card content="summary"><meta name=twitter:title content="Build A Connect Four Library In TypeScript - Part 2"><meta name=twitter:description content="In this series, we will go over how to create a reusable TypeScript class that can be used to build the game Connect Four, and in a future series we will see how we can use this library to create implementations of the Connect Four game for the CLI and the web.
Previously, in part 1 , we reviewed the rules and game play of the game Connect Four and we started to build out the initial ConnectFour class by adding the properties and methods that will be needed."><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Scott Westover" rel=home><div class="logo__item logo__text"><div class=logo__title>Scott Westover</div><div class=logo__tagline>A Developer's Blog</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/courses/><span class=menu__text>Courses</span></a></li><li class=menu__item><a class=menu__link href=/about/><span class=menu__text>About Me</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>Build A Connect Four Library In TypeScript - Part 2</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2023-01-17T06:00:02Z>January 17, 2023</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=/categories/html5/ rel=category>HTML5</a>, <a class=meta__link href=/categories/game-development/ rel=category>Game Development</a>, <a class=meta__link href=/categories/typescript/ rel=category>TypeScript</a>, <a class=meta__link href=/categories/tutorial/ rel=category>Tutorial</a>, <a class=meta__link href=/categories/connect-four/ rel=category>Connect Four</a></span></div></div></header><figure class="post__thumbnail thumbnail"><img class=thumbnail__image src=/post/2023/01/build-a-connect-four-library-in-typescript-part-2/images/build-a-connect-four-library-in-typescript-part-2-thumbnail.png alt="Build A Connect Four Library In TypeScript - Part 2"></figure><div class="post__toc toc"><div class=toc__title>Page content</div><div class=toc__menu><nav id=TableOfContents><ul><li><a href=#series-links>Series Links</a></li><li><a href=#series-code>Series Code</a></li><li><a href=#game-initialization-and-reset-game-state>Game Initialization And Reset Game State</a></li><li><a href=#reset-game-state>Reset Game State</a></li><li><a href=#testing-our-code>Testing Our Code</a></li><li><a href=#adding-new-tests>Adding New Tests</a></li><li><a href=#wrap-up>Wrap Up</a></li></ul></nav></div></div><div class="content post__content clearfix"><p>In this series, we will go over how to create a reusable TypeScript class that can be used to build the game Connect Four, and in a future series we will see how we can use this library to create implementations of the Connect Four game for the CLI and the web.</p><p>Previously, in
<a href=/post/2023/01/build-a-connect-four-library-in-typescript-part-1/>part 1</a>
, we reviewed the rules and game play of the game Connect Four and we started to build out the initial <code>ConnectFour</code> class by adding the properties and methods that will be needed.</p><p>In part 2 of this series, we are going to add the game initialization logic, the ability to reset the game state, and then take a look at how we can test our code using the
<a href=https://github.com/lukeed/uvu target=_blank rel=noopener>uvu</a>
framework.</p><h2 id=series-links>Series Links</h2><p>You can find links to all of the posts in this series here:</p><ul><li><a href=/post/2023/01/build-a-connect-four-library-in-typescript-part-1/>Part 1</a></li><li><a href=/post/2023/01/build-a-connect-four-library-in-typescript-part-2/>Part 2</a></li><li><a href=/post/2023/01/build-a-connect-four-library-in-typescript-part-3/>Part 3</a></li><li><a href=/post/2023/02/build-a-connect-four-library-in-typescript-part-4/>Part 4</a></li><li><a href=/post/2023/02/build-a-connect-four-library-in-typescript-part-5/>Part 5</a></li></ul><h2 id=series-code>Series Code</h2><p>You can find the code for the end of part 1 here:
<a href=https://github.com/devshareacademy/connect-four/tree/blog-post-1 target=_blank rel=noopener>Blog Post 1 Code</a></p><p>You can find the completed source code for this article here on GitHub:
<a href=https://github.com/devshareacademy/connect-four/tree/blog-post-2 target=_blank rel=noopener>Blog Post 2 Code</a></p><p>Lastly, if you would just like to use a NPM package for this library, you can find that here:
<a href=https://www.npmjs.com/package/@devshareacademy/connect-four target=_blank rel=noopener>NPM - @devshareacademy/connect-four</a>
.</p><h2 id=game-initialization-and-reset-game-state>Game Initialization And Reset Game State</h2><p>When we create a new instance of the <code>ConnectFour</code> class, we are currently not doing anything in our <code>constructor</code> for our class. We need to add in logic to setup the initial state of the game. This includes:</p><ul><li>initializing the game board with empty values</li><li>setting the current players turn</li><li>resetting and information on who won the game</li></ul><p>In order to initialize the game board with empty values, we will need to know how many columns and rows should be contained in our board, and then use those values to create our 2D array.</p><p>To do all of this, we can replace the <code>constructor</code> code in the <code>connect-four.ts</code> file with the following:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>constructor</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>this</span>.<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>isGameOver</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>this</span>.<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>gameWinner</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>undefined</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>this</span>.<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>playersTurn</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>Player</span>.<span style=color:#a6e22e>ONE</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>this</span>.<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>initializeGrid</span>();
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Then, at the top of the <code>connect-four.ts</code> file, add the following code:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>NUMBER_OF_ROWS</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>6</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>NUMBER_OF_COLS</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>7</span>;
</span></span></code></pre></div><p>Finally, below the <code>makeMove</code> method in the <code>connect-four.ts</code> file, add the following code:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * Initializes the internal 2D array that represents the Connect Four board with Zeros, which represent empty spaces.
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>initializeGrid</span>()<span style=color:#f92672>:</span> <span style=color:#66d9ef>void</span> {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// reset grid back to an empty state
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>this</span>.<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>board</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// populate the rows and cols for the grid
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>NUMBER_OF_ROWS</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>row</span>: <span style=color:#66d9ef>CellRange</span>[] <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>j</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>j</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>NUMBER_OF_COLS</span>; <span style=color:#a6e22e>j</span> <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>row</span>.<span style=color:#a6e22e>push</span>(<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>board</span>.<span style=color:#a6e22e>push</span>(<span style=color:#a6e22e>row</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>In the code above, the first thing we did was in the <code>constructor</code> we set our internal properties to the initial values that we want for our Connect Four game. We then called a brand new private method, <code>initializeGrid</code>, which will be used to populate our 2D array with <code>0</code>&rsquo;s. Next, we created two new variables to track the number of columns and rows that will be used for our Connect Four game, and we set these values to 7 and 6.</p><p>Lastly, we created the new private method <code>initializeGrid</code>. In this method, we first reset the state of our <code>#board</code> property back to an empty array. We then created two <code>for</code> loops with one of them nested in order to populate the game board. This was done so we could create a 2D array that would be of size 6 x 7, which will represent the board of Connect Four.</p><h2 id=reset-game-state>Reset Game State</h2><p>Previously when we planned the functionality for the <code>ConnectFour</code> class, we wanted to have the ability to reset the game state at any point. When this happens, we want the users to be able to start a new Connect Four game without have to create a new instance of the <code>ConnectFour</code> class. This will involve doing the same steps that are listed above in the class <code>constructor</code>.</p><p>Since we will be redoing the same logic, this is a good chance to refactor the code in class <code>constructor</code> and move this code to a brand new method. To refactor the code, we will create a new private method called <code>#initializeGame</code> and this method will just contain the same code our <code>constructor</code> had.</p><p>In the <code>connect-four.ts</code> file, add the following code below the <code>#initializeGrid</code> method:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * Initializes the internal game state back to the a fresh instance of a Connect Four game, where the board is empty
</span></span></span><span style=display:flex><span><span style=color:#75715e> * and we are waiting for the first player to make a move.
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>initializeGame</span>()<span style=color:#f92672>:</span> <span style=color:#66d9ef>void</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>this</span>.<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>initializeGrid</span>();
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>this</span>.<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>isGameOver</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>this</span>.<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>gameWinner</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>undefined</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>this</span>.<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>playersTurn</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>Player</span>.<span style=color:#a6e22e>ONE</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Then, in the class <code>constructor</code>, replace the code with the following:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>constructor</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>this</span>.<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>initializeGame</span>();
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Finally, now that we have our new internal method, we can update the <code>resetGame</code> method to call the <code>#initializeGame</code> method. In the <code>connect-four.ts</code> file, update the <code>resetGame</code> to have the following code:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#a6e22e>resetGame</span>()<span style=color:#f92672>:</span> <span style=color:#66d9ef>void</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>this</span>.<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>initializeGame</span>();
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=testing-our-code>Testing Our Code</h2><p>Before we start building out the logic for allowing a player to place a game piece, we are going to talk about how we can test the code we are writing. As part of the initial project skeleton, the project was setup to support tests written with
<a href=https://github.com/lukeed/uvu target=_blank rel=noopener>uvu</a>
, and there is a folder called <code>tests</code> that has a few files with some sample tests. Currently, the <code>tests/index.ts</code> file has a simple test for making sure the <code>ConnectFour</code> class is exported, and the <code>tests/connect-four.ts</code> file has a test for creating an instance of our <code>ConnectFour</code> class.</p><p>In order to test the code we are creating, we will be adding new tests to these files, which will help test the functionality. We will not be doing a deep dive into the <code>uvu</code> test framework, but we will discuss some of the key concepts of that framework shortly. To run the tests, you can run one of the following commands, which will have the <code>uvu</code> cli run our tests:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># NPM Package Manager</span>
</span></span><span style=display:flex><span>npm run test
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Yarn Package Manager</span>
</span></span><span style=display:flex><span>yarn test
</span></span></code></pre></div><p>You should see the following output:</p><p><img src=./images/build-a-connect-four-library-in-typescript-part-2-1.png alt="uvu Test Output"></p><p>The output is just a summary of the number of tests that ran and an overall summary if the tests passed, or failed.</p><p>So now that we know how to run the tests, lets review the existing code in the <code>tests/connect-four.ts</code> file:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>connectFour</span>: <span style=color:#66d9ef>ConnectFour</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* Connect Four - Game Initialization Tests */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>setupInitializationTests</span>()<span style=color:#f92672>:</span> <span style=color:#66d9ef>void</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>connectFourInitializationSuite</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>uvu</span>.<span style=color:#a6e22e>suite</span>(<span style=color:#e6db74>&#39;Connect Four - Initialization&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>connectFourInitializationSuite</span>.<span style=color:#a6e22e>before</span>.<span style=color:#a6e22e>each</span>(() <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>connectFour</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>ConnectFour</span>();
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>connectFourInitializationSuite</span>(<span style=color:#e6db74>&#39;should be an instance of the ConnectFour class&#39;</span>, () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>assert</span>.<span style=color:#a6e22e>instance</span>(<span style=color:#a6e22e>connectFour</span>, <span style=color:#a6e22e>ConnectFour</span>);
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>connectFourInitializationSuite</span>.<span style=color:#a6e22e>run</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>setupInitializationTests</span>();
</span></span></code></pre></div><p>In the code above, we created a function called <code>setupInitializationTests</code>, which is just a helper function to group our code that is related to the functionality that we want to test. This makes it easier to run one particular set of tests, and helps with code readability. In the <code>setupInitializationTests</code> function, we first create a test <code>suite</code>, which is just a way to group tests together. To create a <code>suite</code>, we call the <code>uvu.suite</code> method and provide a name of our <code>suite</code>. This name will match the output summary that is shown when you run the tests.</p><p>After we created the <code>suite</code>, we then called the <code>before.each</code> method on our <code>suite</code> instance, <code>connectFourInitializationSuite</code>, which allows us to register a callback function that will be invoked before each test in our <code>suite</code>. This callback is useful for setting up any variables that we need for our tests, and for grouping code together that is common across all tests. In the code above, we are creating a new instance of our <code>ConnectFour</code> class before each test. This will help ensure we are testing each instance in isolation, instead of reusing the same <code>ConnectFour</code> instance in each test.</p><p>We then created our first test by invoking our <code>suite</code> instance, and we passed two arguments: the name of the test and a callback function that will contain the logic for the test we are writing. In our current test, we are using <code>assert.instance</code> to validate that our <code>connectFour</code> variable is an instance of the <code>ConnectFour</code> class.</p><p>Finally, for the tests to actually run, we need to call the <code>run</code> method on our test <code>suite</code>.</p><p>Currently, our single test is setup to pass. In order to see what a test failure looks like, we can change the following line: <code>assert.instance(connectFour, ConnectFour);</code> to <code>assert.instance(connectFour, 'string');</code>. If you save your code and run the test script again, you should see output similar to this:</p><p><img src=./images/build-a-connect-four-library-in-typescript-part-2-2.png alt="uvu Failed Test Output"></p><p>In the test summary output, we will see that the name of our test suite is shown, <code>Connect Four - Initialization</code>, followed by the name of the test that failed, <code>should be an instance of the ConnectFour class</code>. This will help you identify the tests that are failing so you can debug that test.</p><p>There was a lot of information presented here, however in summary the main things to take away from this section are:</p><ul><li>suites - are a way to group our tests</li><li>tests - are an individual function that will test some type of functionality, these are added to <code>suites</code></li><li>in order to run the tests in an uvu suite, you need to call the <code>run</code> method on that <code>suite</code>, otherwise no tests will run</li></ul><h2 id=adding-new-tests>Adding New Tests</h2><p>So now that we have reviewed our existing tests, we will now add some new tests to validate our game initialization logic. In the <code>tests/connect-four.ts</code> file, replace all of the code in with the following code:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>as</span> <span style=color:#a6e22e>uvu</span> <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;uvu&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>as</span> <span style=color:#a6e22e>assert</span> <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;uvu/assert&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>ConnectFour</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;../src&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>Player</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;../src/connect-four&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>connectFour</span>: <span style=color:#66d9ef>ConnectFour</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* Connect Four - Game Initialization Tests */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>setupInitializationTests</span>()<span style=color:#f92672>:</span> <span style=color:#66d9ef>void</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>connectFourInitializationSuite</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>uvu</span>.<span style=color:#a6e22e>suite</span>(<span style=color:#e6db74>&#39;Connect Four - Initialization&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>connectFourInitializationSuite</span>.<span style=color:#a6e22e>before</span>.<span style=color:#a6e22e>each</span>(() <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>connectFour</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>ConnectFour</span>();
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>connectFourInitializationSuite</span>(<span style=color:#e6db74>&#39;should initialize the game state with an empty board&#39;</span>, () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// check that the board is initialized with empty values
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>isBoardEmpty</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>connectFour</span>.<span style=color:#a6e22e>board</span>.<span style=color:#a6e22e>every</span>((<span style=color:#a6e22e>row</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>row</span>.<span style=color:#a6e22e>every</span>((<span style=color:#a6e22e>cell</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>cell</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>0</span>));
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>assert</span>.<span style=color:#a6e22e>equal</span>(<span style=color:#a6e22e>isBoardEmpty</span>, <span style=color:#66d9ef>true</span>);
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>connectFourInitializationSuite</span>(<span style=color:#e6db74>&#39;should initialize the game with no winner&#39;</span>, () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>winner</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>connectFour</span>.<span style=color:#a6e22e>gameWinner</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>assert</span>.<span style=color:#66d9ef>type</span>(<span style=color:#a6e22e>winner</span>, <span style=color:#e6db74>&#39;undefined&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>assert</span>.<span style=color:#a6e22e>equal</span>(<span style=color:#a6e22e>winner</span>, <span style=color:#66d9ef>undefined</span>);
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>connectFourInitializationSuite</span>(<span style=color:#e6db74>&#39;should initialize the game and the game should not be over&#39;</span>, () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>isGameOver</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>connectFour</span>.<span style=color:#a6e22e>isGameOver</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>assert</span>.<span style=color:#66d9ef>type</span>(<span style=color:#a6e22e>isGameOver</span>, <span style=color:#e6db74>&#39;boolean&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>assert</span>.<span style=color:#a6e22e>equal</span>(<span style=color:#a6e22e>isGameOver</span>, <span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>connectFourInitializationSuite</span>(<span style=color:#e6db74>&#39;should initialize the game and wait for the first players input&#39;</span>, () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>currentPlayersTurn</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>connectFour</span>.<span style=color:#a6e22e>playersTurn</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>assert</span>.<span style=color:#66d9ef>type</span>(<span style=color:#a6e22e>currentPlayersTurn</span>, <span style=color:#e6db74>&#39;string&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>assert</span>.<span style=color:#a6e22e>equal</span>(<span style=color:#a6e22e>currentPlayersTurn</span>, <span style=color:#a6e22e>Player</span>.<span style=color:#a6e22e>ONE</span>);
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>connectFourInitializationSuite</span>.<span style=color:#a6e22e>run</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* Connect Four - Reset Game Tests */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>setupResetGameTests</span>()<span style=color:#f92672>:</span> <span style=color:#66d9ef>void</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>connectFourResetGameSuite</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>uvu</span>.<span style=color:#a6e22e>suite</span>(<span style=color:#e6db74>&#39;Connect Four - Reset Game&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>connectFourResetGameSuite</span>.<span style=color:#a6e22e>before</span>.<span style=color:#a6e22e>each</span>(() <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>connectFour</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>ConnectFour</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>connectFour</span>.<span style=color:#a6e22e>makeMove</span>(<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>connectFour</span>.<span style=color:#a6e22e>resetGame</span>();
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>connectFourResetGameSuite</span>(<span style=color:#e6db74>&#39;should reset the game state with an empty board&#39;</span>, () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// check that the board is initialized with empty values
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>isBoardEmpty</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>connectFour</span>.<span style=color:#a6e22e>board</span>.<span style=color:#a6e22e>every</span>((<span style=color:#a6e22e>row</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>row</span>.<span style=color:#a6e22e>every</span>((<span style=color:#a6e22e>cell</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>cell</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>0</span>));
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>assert</span>.<span style=color:#a6e22e>equal</span>(<span style=color:#a6e22e>isBoardEmpty</span>, <span style=color:#66d9ef>true</span>);
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>connectFourResetGameSuite</span>(<span style=color:#e6db74>&#39;should reset the game state with no winner&#39;</span>, () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>winner</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>connectFour</span>.<span style=color:#a6e22e>gameWinner</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>assert</span>.<span style=color:#66d9ef>type</span>(<span style=color:#a6e22e>winner</span>, <span style=color:#e6db74>&#39;undefined&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>assert</span>.<span style=color:#a6e22e>equal</span>(<span style=color:#a6e22e>winner</span>, <span style=color:#66d9ef>undefined</span>);
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>connectFourResetGameSuite</span>(<span style=color:#e6db74>&#39;should reset the game state and the game should not be over&#39;</span>, () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>isGameOver</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>connectFour</span>.<span style=color:#a6e22e>isGameOver</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>assert</span>.<span style=color:#66d9ef>type</span>(<span style=color:#a6e22e>isGameOver</span>, <span style=color:#e6db74>&#39;boolean&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>assert</span>.<span style=color:#a6e22e>equal</span>(<span style=color:#a6e22e>isGameOver</span>, <span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>connectFourResetGameSuite</span>(<span style=color:#e6db74>&#39;should reset the game state and wait for the first players input&#39;</span>, () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>currentPlayersTurn</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>connectFour</span>.<span style=color:#a6e22e>playersTurn</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>assert</span>.<span style=color:#66d9ef>type</span>(<span style=color:#a6e22e>currentPlayersTurn</span>, <span style=color:#e6db74>&#39;string&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>assert</span>.<span style=color:#a6e22e>equal</span>(<span style=color:#a6e22e>currentPlayersTurn</span>, <span style=color:#a6e22e>Player</span>.<span style=color:#a6e22e>ONE</span>);
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>connectFourResetGameSuite</span>.<span style=color:#a6e22e>run</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>setupInitializationTests</span>();
</span></span><span style=display:flex><span><span style=color:#a6e22e>setupResetGameTests</span>();
</span></span></code></pre></div><p>The code above should look similar to the code that was there previously. The main difference is that we have now added multiple tests to our <code>Connect Four - Initialization</code> test suite and we created a new test suite called <code>Connect Four - Reset Game</code>, which will contain the tests for our reset game logic. In summary, we added tests to validate that each of our class properties are being set correctly, and we added logic to validate that our game board is being initialized with <code>0's</code>, instead of just being an empty array.</p><p>In the code above, we referenced some new tests assertions, so lets review those now:</p><ul><li><code>assert.type</code> is used for validating the type of a variable, and this can be done by passing the variable and the type you are expecting that variable to be. This function uses <code>typeof</code> to validate the types.</li><li><code>assert.equal</code> is used for validating that the two provided arguments are deeply equal, and this function uses
<a href=https://github.com/lukeed/dequal target=_blank rel=noopener>dequal</a>
to perform this validation.</li></ul><p>If you save your code and re-run the tests, you should see that they are all passing.</p><p><img src=./images/build-a-connect-four-library-in-typescript-part-2-3.png alt="uvu Updated Tests Output"></p><h2 id=wrap-up>Wrap Up</h2><p>In this article, we reviewed the rules and game play of the game Connect Four and we started to build out the initial <code>ConnectFour</code> class by adding the properties and methods that will be needed.</p><p>You can find the completed source code for this article here on GitHub:
<a href=https://github.com/devshareacademy/connect-four/tree/blog-post-2 target=_blank rel=noopener>Blog Post 2 Code</a>
.</p><p>If you run into any issues, please reach out via
<a href=https://github.com/devshareacademy/connect-four/discussions target=_blank rel=noopener>GitHub Discussions</a>
, or leave a comment down below.</p><p>In
<a href=/post/2023/01/build-a-connect-four-library-in-typescript-part-3/>part 3</a>
of this series, we will start adding in the logic for allowing players to drop a game piece into a column.</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/html5/ rel=tag>HTML5</a></li><li class=tags__item><a class="tags__link btn" href=/tags/game-development/ rel=tag>Game Development</a></li><li class=tags__item><a class="tags__link btn" href=/tags/typescript/ rel=tag>TypeScript</a></li><li class=tags__item><a class="tags__link btn" href=/tags/tutorial/ rel=tag>Tutorial</a></li><li class=tags__item><a class="tags__link btn" href=/tags/connect-four/ rel=tag>Connect Four</a></li></ul></div></footer></article></main><div class="authorbox clearfix"><figure class=authorbox__avatar><img alt="Scott Westover avatar" src=https://secure.gravatar.com/avatar/d5b6863a31baa2c531949202b1de9c82 class=avatar height=90 width=90></figure><div class=authorbox__header><span class=authorbox__name>About Scott Westover</span></div><div class=authorbox__description>Scott Westover is a Software Developer who loves coding, writing tutorials, participating in game jams, and learning about new technologies. When he is not coding, he is either spending time with his wife and two kids or is reading a great book. Scott is looking to form connections and share his knowledge.</div></div><nav class="pager flex"><div class="pager__item pager__item--prev"><a class=pager__link href=/post/2023/01/build-a-connect-four-library-in-typescript-part-1/ rel=prev><span class=pager__subtitle>«&#8201;Previous</span><p class=pager__title>Build A Connect Four Library In TypeScript - Part 1</p></a></div><div class="pager__item pager__item--next"><a class=pager__link href=/post/2023/01/build-a-connect-four-library-in-typescript-part-3/ rel=next><span class=pager__subtitle>Next&#8201;»</span><p class=pager__title>Build A Connect Four Library In TypeScript - Part 3</p></a></div></nav><section class=comments><div id=gitment-comments></div></section><script src=https://utteranc.es/client.js repo=scottwestover/scottwestover.dev issue-term=pathname theme=github-light crossorigin=anonymous async></script></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2024 Scott Westover.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>