<!doctype html><html class=no-js lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>Build A Connect Four Library In TypeScript - Part 3 - Scott Westover</title><script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="Build A Connect Four Library In TypeScript - Part 3"><meta property="og:description" content="In this series, we will go over how to create a reusable TypeScript class that can be used to build the game Connect Four, and in a future series we will see how we can use this library to create implementations of the Connect Four game for the CLI and the web.
Previously, in part 2 , we added the initial game initialization logic, the ability to reset the game state, and we then learned how we could test our code using the uvu framework."><meta property="og:type" content="article"><meta property="og:url" content="https://scottwestover.dev/post/2023/01/build-a-connect-four-library-in-typescript-part-3/"><meta property="article:section" content="post"><meta property="article:published_time" content="2023-01-20T06:00:02+00:00"><meta property="article:modified_time" content="2023-01-20T06:00:02+00:00"><meta itemprop=name content="Build A Connect Four Library In TypeScript - Part 3"><meta itemprop=description content="In this series, we will go over how to create a reusable TypeScript class that can be used to build the game Connect Four, and in a future series we will see how we can use this library to create implementations of the Connect Four game for the CLI and the web.
Previously, in part 2 , we added the initial game initialization logic, the ability to reset the game state, and we then learned how we could test our code using the uvu framework."><meta itemprop=datePublished content="2023-01-20T06:00:02+00:00"><meta itemprop=dateModified content="2023-01-20T06:00:02+00:00"><meta itemprop=wordCount content="2675"><meta itemprop=keywords content="HTML5,Game Development,TypeScript,Tutorial,Connect Four,"><meta name=twitter:card content="summary"><meta name=twitter:title content="Build A Connect Four Library In TypeScript - Part 3"><meta name=twitter:description content="In this series, we will go over how to create a reusable TypeScript class that can be used to build the game Connect Four, and in a future series we will see how we can use this library to create implementations of the Connect Four game for the CLI and the web.
Previously, in part 2 , we added the initial game initialization logic, the ability to reset the game state, and we then learned how we could test our code using the uvu framework."><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Scott Westover" rel=home><div class="logo__item logo__text"><div class=logo__title>Scott Westover</div><div class=logo__tagline>A Developer's Blog</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/courses/><span class=menu__text>Courses</span></a></li><li class=menu__item><a class=menu__link href=/about/><span class=menu__text>About Me</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>Build A Connect Four Library In TypeScript - Part 3</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2023-01-20T06:00:02Z>January 20, 2023</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=/categories/html5/ rel=category>HTML5</a>, <a class=meta__link href=/categories/game-development/ rel=category>Game Development</a>, <a class=meta__link href=/categories/typescript/ rel=category>TypeScript</a>, <a class=meta__link href=/categories/tutorial/ rel=category>Tutorial</a>, <a class=meta__link href=/categories/connect-four/ rel=category>Connect Four</a></span></div></div></header><figure class="post__thumbnail thumbnail"><img class=thumbnail__image src=/post/2023/01/build-a-connect-four-library-in-typescript-part-3/images/build-a-connect-four-library-in-typescript-part-3-thumbnail.png alt="Build A Connect Four Library In TypeScript - Part 3"></figure><div class="post__toc toc"><div class=toc__title>Page content</div><div class=toc__menu><nav id=TableOfContents><ul><li><a href=#series-links>Series Links</a></li><li><a href=#series-code>Series Code</a></li><li><a href=#making-a-move>Making A Move</a></li><li><a href=#validating-a-players-move>Validating A Players Move</a></li><li><a href=#update-board-state>Update Board State</a></li><li><a href=#testing-our-changes>Testing Our Changes</a></li><li><a href=#checking-for-game-end>Checking For Game End</a></li><li><a href=#wrap-up>Wrap Up</a></li></ul></nav></div></div><div class="content post__content clearfix"><p>In this series, we will go over how to create a reusable TypeScript class that can be used to build the game Connect Four, and in a future series we will see how we can use this library to create implementations of the Connect Four game for the CLI and the web.</p><p>Previously, in
<a href=/post/2023/01/build-a-connect-four-library-in-typescript-part-2/>part 2</a>
, we added the initial game initialization logic, the ability to reset the game state, and we then learned how we could test our code using the uvu framework.</p><p>In this part of the series, we are going to start adding in the game logic for allowing players to place their game pieces in a column on the Connect Four board.</p><h2 id=series-links>Series Links</h2><p>You can find links to all of the posts in this series here:</p><ul><li><a href=/post/2023/01/build-a-connect-four-library-in-typescript-part-1/>Part 1</a></li><li><a href=/post/2023/01/build-a-connect-four-library-in-typescript-part-2/>Part 2</a></li><li><a href=/post/2023/01/build-a-connect-four-library-in-typescript-part-3/>Part 3</a></li><li><a href=/post/2023/02/build-a-connect-four-library-in-typescript-part-4/>Part 4</a></li><li><a href=/post/2023/02/build-a-connect-four-library-in-typescript-part-5/>Part 5</a></li></ul><h2 id=series-code>Series Code</h2><p>You can find the code for the end of part 2 here:
<a href=https://github.com/devshareacademy/connect-four/tree/blog-post-2 target=_blank rel=noopener>Blog Post 2 Code</a></p><p>You can find the completed source code for this article here on GitHub:
<a href=https://github.com/devshareacademy/connect-four/tree/blog-post-3 target=_blank rel=noopener>Blog Post 3 Code</a></p><p>Lastly, if you would just like to use a NPM package for this library, you can find that here:
<a href=https://www.npmjs.com/package/@devshareacademy/connect-four target=_blank rel=noopener>NPM - @devshareacademy/connect-four</a>
.</p><h2 id=making-a-move>Making A Move</h2><p>Previously, we created a method called <code>makeMove</code> that will allow players to place a game piece into a single column, and we left a <code>TODO</code> to add in the code that belongs here. Before we jump into the code, lets review the what we will need to do in this method.</p><p>For this method, we will want to allow the player to pass in the index of the column that they would like to drop their game piece into, and we will want to return the column and row of where the game piece landed. By adding this return value, it will allow us to easily show where a new game piece was added to the board state.</p><p>When a user provides a column index, we will want to do the following:</p><ul><li>Validate that the provided index is a valid number for the number of columns in our game, any number from 0 to 6, since we have 7 columns and our array index starts at 0.</li><li>Validate that the game is not already over.</li><li>Validate that the column we are trying to place the game piece into is not already full.</li></ul><p>After we validate that the move is valid, we will need to find the first empty row so we will know where the game piece will land when the player drops the piece into a column. Once we know the row, we can update the internal board state to have a <code>1</code>, or <code>2</code> depending on the current players turn. After updating the board state, we will need to check to see if the game is over, by validating if the board is full, or if a player got a Connect Four.</p><p>Lastly, we will want to update the current players turn if the game is not over and then return the column and row for where game piece was placed.</p><p>Now that we have reviewed the game logic that we want in this method, lets start to add some code.</p><h2 id=validating-a-players-move>Validating A Players Move</h2><p>When we go to validate a players move, if the move is invalid we are going to throw an <code>Error</code> with a custom message. To keep track of these error messages, we will create a new <code>enum</code> called <code>ConnectFourError</code>. To do this, add the following code at the top of the <code>connect-four.ts</code> file with the other types:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>enum</span> <span style=color:#a6e22e>ConnectFourError</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>INVALID_MOVE</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;Column is already filled, please provide a different column.&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>INVALID_COLUMN</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;Invalid column specified. Please provide a valid column number.&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>INVALID_MOVE_GAME_IS_OVER</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;Game has already ended, please reset the game.&#39;</span>,
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Next, in the <code>makeMove</code> method, replace the <code>TODO</code> comment with the following code:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#75715e>// check for validate board space
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>col</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>col</span> <span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>NUMBER_OF_COLS</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> Error(<span style=color:#a6e22e>ConnectFourError</span>.<span style=color:#a6e22e>INVALID_COLUMN</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// validate that the game is not already done
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span>.<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>isGameOver</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> Error(<span style=color:#a6e22e>ConnectFourError</span>.<span style=color:#a6e22e>INVALID_MOVE_GAME_IS_OVER</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// validate that the space is not already taken
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>board</span>[<span style=color:#ae81ff>0</span>][<span style=color:#a6e22e>col</span>] <span style=color:#f92672>!==</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> Error(<span style=color:#a6e22e>ConnectFourError</span>.<span style=color:#a6e22e>INVALID_MOVE</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>In the code above, we are performing the three validations we listed above for when a player makes a move. If any of the checks fail, we throw an <code>Error</code> and use one of the <code>ConnectFourError</code> values we provided. One thing to note is in the check for validating if a column is full, we are only checking if the top most row is not empty since we fill the board from the bottom row up.</p><h2 id=update-board-state>Update Board State</h2><p>Now that we have added the initial checks for if the move is valid, we need to add the remaining game logic to the <code>makeMove</code> method. To do this, add the following code below the code you just added:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#75715e>// update the state of the board to include the players selected space
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>row</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>NUMBER_OF_ROWS</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>-=</span> <span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span>.<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>board</span>[<span style=color:#a6e22e>i</span>][<span style=color:#a6e22e>col</span>] <span style=color:#f92672>===</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span>.<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>playersTurn</span> <span style=color:#f92672>===</span> <span style=color:#a6e22e>Player</span>.<span style=color:#a6e22e>ONE</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>board</span>[<span style=color:#a6e22e>i</span>][<span style=color:#a6e22e>col</span>] <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>board</span>[<span style=color:#a6e22e>i</span>][<span style=color:#a6e22e>col</span>] <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>row</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>i</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// check if the game is finished
</span></span></span><span style=display:flex><span><span style=color:#75715e>// TODO
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>coordinate</span>: <span style=color:#66d9ef>Coordinate</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>col</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>row</span>,
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span>.<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>isGameOver</span>) <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>coordinate</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// update the current players turn
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span>.<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>playersTurn</span> <span style=color:#f92672>===</span> <span style=color:#a6e22e>Player</span>.<span style=color:#a6e22e>ONE</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>this</span>.<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>playersTurn</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>Player</span>.<span style=color:#a6e22e>TWO</span>;
</span></span><span style=display:flex><span>} <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>this</span>.<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>playersTurn</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>Player</span>.<span style=color:#a6e22e>ONE</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>return</span> <span style=color:#a6e22e>coordinate</span>;
</span></span></code></pre></div><p>In the code above, we are doing the following:</p><ul><li>We created a new variable called <code>row</code>, which will be used for tracking which row the game piece will be placed at.</li><li>We are determining the first empty row from the bottom of the board, by looping through our rows backwards. In each iteration of the loop, we are checking to see if the cell for that row and column combination is empty. If the cell is empty, we update that cells value to match which players turn it is, and we break out of our <code>for</code> loop. If the cell is not empty, we let the loop continue to the next iteration.</li><li>We added a <code>TODO</code> comment for checking if the game is finished.</li><li>We then created a new variable called <code>coordinate</code> and we referenced a new <code>type</code> that we have not created yet. The <code>Coordinate</code> will be a simple object that contains the row and column of where the game piece was placed.</li><li>We then update the current players turn if the game is not over, and return the <code>coordinate</code> variable.</li></ul><p>Since, we referenced a new <code>type</code> called <code>Coordinate</code>, lets add that to the top of our <code>connect-four.ts</code> file:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Coordinate</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>col</span>: <span style=color:#66d9ef>number</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>row</span>: <span style=color:#66d9ef>number</span>;
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><p>Finally, we need to update the return value of our <code>makeMove</code> method to show we are not returning a <code>Coordinate</code> object. To do this, replace the following line of code:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#a6e22e>makeMove</span>(<span style=color:#a6e22e>col</span>: <span style=color:#66d9ef>number</span>)<span style=color:#f92672>:</span> <span style=color:#66d9ef>void</span> {
</span></span></code></pre></div><p>with the following:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#a6e22e>makeMove</span>(<span style=color:#a6e22e>col</span>: <span style=color:#66d9ef>number</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Coordinate</span> {
</span></span></code></pre></div><h2 id=testing-our-changes>Testing Our Changes</h2><p>Now that we have most of the logic in place for our <code>makeMove</code> method, we can start to test our changes. To do this, we will add a new <code>suite</code> of tests to our <code>tests/connect-four.ts</code> file. For our tests, we will want to test for the following functionality:</p><ul><li>When a player makes a move, the method should return the column and row values as part of an object for where the game piece was placed on our board.</li><li>When the first player makes a move, the board state should have a <code>1</code> in the column where the game piece was placed and it should now be the next players turn.</li><li>When the second player makes a move, the board state should have a <code>2</code> in the column where the game piece was placed and it should be player ones turn again.</li><li>If an invalid column is provided, we should get an <code>Error</code> and the game state should not be modified.</li><li>If a column is already filled, then we should also get an <code>Error</code> and the game state should not be modified.</li></ul><p>To add these test cases, add the following code to the <code>tests/connect-four.ts</code> file, below our other functions:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#75715e>/* Connect Four - Players Place Game Pieces Tests */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>setupPlaceGamePieceTests</span>()<span style=color:#f92672>:</span> <span style=color:#66d9ef>void</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>connectFourPlayersInputSuite</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>uvu</span>.<span style=color:#a6e22e>suite</span>(<span style=color:#e6db74>&#39;Connect Four - Players Place Game Pieces&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>connectFourPlayersInputSuite</span>.<span style=color:#a6e22e>before</span>.<span style=color:#a6e22e>each</span>(() <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>connectFour</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>ConnectFour</span>();
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>connectFourPlayersInputSuite</span>(<span style=color:#e6db74>&#39;should return the coordinate of the cell where the game piece was placed&#39;</span>, () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>makeMoveResponse</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>connectFour</span>.<span style=color:#a6e22e>makeMove</span>(<span style=color:#ae81ff>4</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>assert</span>.<span style=color:#a6e22e>equal</span>(<span style=color:#a6e22e>makeMoveResponse</span>, {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>col</span>: <span style=color:#66d9ef>4</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>row</span>: <span style=color:#66d9ef>5</span>,
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>connectFourPlayersInputSuite</span>(<span style=color:#e6db74>&#39;should allow first player to place a game piece and update the game state&#39;</span>, () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>connectFour</span>.<span style=color:#a6e22e>makeMove</span>(<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>currentPlayersTurn</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>connectFour</span>.<span style=color:#a6e22e>playersTurn</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>assert</span>.<span style=color:#66d9ef>type</span>(<span style=color:#a6e22e>currentPlayersTurn</span>, <span style=color:#e6db74>&#39;string&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>assert</span>.<span style=color:#a6e22e>equal</span>(<span style=color:#a6e22e>currentPlayersTurn</span>, <span style=color:#a6e22e>Player</span>.<span style=color:#a6e22e>TWO</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>isGameOver</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>connectFour</span>.<span style=color:#a6e22e>isGameOver</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>assert</span>.<span style=color:#66d9ef>type</span>(<span style=color:#a6e22e>isGameOver</span>, <span style=color:#e6db74>&#39;boolean&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>assert</span>.<span style=color:#a6e22e>equal</span>(<span style=color:#a6e22e>isGameOver</span>, <span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>winner</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>connectFour</span>.<span style=color:#a6e22e>gameWinner</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>assert</span>.<span style=color:#66d9ef>type</span>(<span style=color:#a6e22e>winner</span>, <span style=color:#e6db74>&#39;undefined&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>assert</span>.<span style=color:#a6e22e>equal</span>(<span style=color:#a6e22e>winner</span>, <span style=color:#66d9ef>undefined</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>boardState</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>      [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>      [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>      [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>      [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>      [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>      [<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>    ];
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>assert</span>.<span style=color:#a6e22e>equal</span>(<span style=color:#a6e22e>boardState</span>, <span style=color:#a6e22e>connectFour</span>.<span style=color:#a6e22e>board</span>);
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>connectFourPlayersInputSuite</span>(<span style=color:#e6db74>&#39;should allow second player to place a game piece and update the game state&#39;</span>, () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>connectFour</span>.<span style=color:#a6e22e>makeMove</span>(<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>connectFour</span>.<span style=color:#a6e22e>makeMove</span>(<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>currentPlayersTurn</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>connectFour</span>.<span style=color:#a6e22e>playersTurn</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>assert</span>.<span style=color:#66d9ef>type</span>(<span style=color:#a6e22e>currentPlayersTurn</span>, <span style=color:#e6db74>&#39;string&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>assert</span>.<span style=color:#a6e22e>equal</span>(<span style=color:#a6e22e>currentPlayersTurn</span>, <span style=color:#a6e22e>Player</span>.<span style=color:#a6e22e>ONE</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>isGameOver</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>connectFour</span>.<span style=color:#a6e22e>isGameOver</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>assert</span>.<span style=color:#66d9ef>type</span>(<span style=color:#a6e22e>isGameOver</span>, <span style=color:#e6db74>&#39;boolean&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>assert</span>.<span style=color:#a6e22e>equal</span>(<span style=color:#a6e22e>isGameOver</span>, <span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>winner</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>connectFour</span>.<span style=color:#a6e22e>gameWinner</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>assert</span>.<span style=color:#66d9ef>type</span>(<span style=color:#a6e22e>winner</span>, <span style=color:#e6db74>&#39;undefined&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>assert</span>.<span style=color:#a6e22e>equal</span>(<span style=color:#a6e22e>winner</span>, <span style=color:#66d9ef>undefined</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>boardState</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>      [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>      [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>      [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>      [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>      [<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>      [<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>    ];
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>assert</span>.<span style=color:#a6e22e>equal</span>(<span style=color:#a6e22e>boardState</span>, <span style=color:#a6e22e>connectFour</span>.<span style=color:#a6e22e>board</span>);
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>connectFourPlayersInputSuite</span>(
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;should throw an error if an invalid column is provided and not modify the game state&#39;</span>,
</span></span><span style=display:flex><span>    () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>assert</span>.<span style=color:#a6e22e>throws</span>(() <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>connectFour</span>.<span style=color:#a6e22e>makeMove</span>(<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>), <span style=color:#e6db74>/Invalid column specified/</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>currentPlayersTurn</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>connectFour</span>.<span style=color:#a6e22e>playersTurn</span>;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>assert</span>.<span style=color:#66d9ef>type</span>(<span style=color:#a6e22e>currentPlayersTurn</span>, <span style=color:#e6db74>&#39;string&#39;</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>assert</span>.<span style=color:#a6e22e>equal</span>(<span style=color:#a6e22e>currentPlayersTurn</span>, <span style=color:#a6e22e>Player</span>.<span style=color:#a6e22e>ONE</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>isGameOver</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>connectFour</span>.<span style=color:#a6e22e>isGameOver</span>;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>assert</span>.<span style=color:#66d9ef>type</span>(<span style=color:#a6e22e>isGameOver</span>, <span style=color:#e6db74>&#39;boolean&#39;</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>assert</span>.<span style=color:#a6e22e>equal</span>(<span style=color:#a6e22e>isGameOver</span>, <span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>winner</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>connectFour</span>.<span style=color:#a6e22e>gameWinner</span>;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>assert</span>.<span style=color:#66d9ef>type</span>(<span style=color:#a6e22e>winner</span>, <span style=color:#e6db74>&#39;undefined&#39;</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>assert</span>.<span style=color:#a6e22e>equal</span>(<span style=color:#a6e22e>winner</span>, <span style=color:#66d9ef>undefined</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>boardState</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>        [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>        [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>        [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>        [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>        [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>        [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>      ];
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>assert</span>.<span style=color:#a6e22e>equal</span>(<span style=color:#a6e22e>boardState</span>, <span style=color:#a6e22e>connectFour</span>.<span style=color:#a6e22e>board</span>);
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>connectFourPlayersInputSuite</span>(
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;should throw an error if a column is already filled and not modify the game state&#39;</span>,
</span></span><span style=display:flex><span>    () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>connectFour</span>.<span style=color:#a6e22e>makeMove</span>(<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>connectFour</span>.<span style=color:#a6e22e>makeMove</span>(<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>connectFour</span>.<span style=color:#a6e22e>makeMove</span>(<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>connectFour</span>.<span style=color:#a6e22e>makeMove</span>(<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>connectFour</span>.<span style=color:#a6e22e>makeMove</span>(<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>connectFour</span>.<span style=color:#a6e22e>makeMove</span>(<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>assert</span>.<span style=color:#a6e22e>throws</span>(() <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>connectFour</span>.<span style=color:#a6e22e>makeMove</span>(<span style=color:#ae81ff>0</span>), <span style=color:#e6db74>/Column is already filled/</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>currentPlayersTurn</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>connectFour</span>.<span style=color:#a6e22e>playersTurn</span>;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>assert</span>.<span style=color:#66d9ef>type</span>(<span style=color:#a6e22e>currentPlayersTurn</span>, <span style=color:#e6db74>&#39;string&#39;</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>assert</span>.<span style=color:#a6e22e>equal</span>(<span style=color:#a6e22e>currentPlayersTurn</span>, <span style=color:#a6e22e>Player</span>.<span style=color:#a6e22e>ONE</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>isGameOver</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>connectFour</span>.<span style=color:#a6e22e>isGameOver</span>;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>assert</span>.<span style=color:#66d9ef>type</span>(<span style=color:#a6e22e>isGameOver</span>, <span style=color:#e6db74>&#39;boolean&#39;</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>assert</span>.<span style=color:#a6e22e>equal</span>(<span style=color:#a6e22e>isGameOver</span>, <span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>winner</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>connectFour</span>.<span style=color:#a6e22e>gameWinner</span>;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>assert</span>.<span style=color:#66d9ef>type</span>(<span style=color:#a6e22e>winner</span>, <span style=color:#e6db74>&#39;undefined&#39;</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>assert</span>.<span style=color:#a6e22e>equal</span>(<span style=color:#a6e22e>winner</span>, <span style=color:#66d9ef>undefined</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>boardState</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>        [<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>        [<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>        [<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>        [<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>        [<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>        [<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>      ];
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>assert</span>.<span style=color:#a6e22e>equal</span>(<span style=color:#a6e22e>boardState</span>, <span style=color:#a6e22e>connectFour</span>.<span style=color:#a6e22e>board</span>);
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>connectFourPlayersInputSuite</span>.<span style=color:#a6e22e>run</span>();
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Then, at the bottom of the file, add the following line of code to invoke our new <code>function</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#a6e22e>setupPlaceGamePieceTests</span>();
</span></span></code></pre></div><p>The code above should look similar to the other tests that we have added to our Connect Four library. In the tests above, we are using one new <code>assert</code> method called <code>throws</code>, which is used for validating that when a particular piece of code runs, an <code>Error</code> is thrown. This method allows you to provide a Regex Expression, <code>RegExp</code>, to match against the <code>Error</code> message that is received.</p><p>As an example: <code>assert.throws(() => connectFour.makeMove(0), /Column is already filled/);</code>, in this line of code we are asserting that when the <code>connectFour.makeMove(0)</code> code is executed, an <code>Error</code> will be thrown and the message property on that error will contain the string: <code>Column is already filled</code>.</p><p>Besides the <code>assert.throws</code>, we are just using the <code>assert.equal</code> and <code>assert.type</code> methods to validate our internal board state for each test. In each test, we are checking the following values to make sure the game state is what we expect it to be:</p><ul><li>the current players turn</li><li>if the game is not over</li><li>if there is no game winner</li><li>if the values in the board are equal to the players game pieces that were placed</li></ul><p>To make sure all of our tests are passing, you can run the test script in the <code>package.json</code> file by running on of the following commands:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># NPM Package Manager</span>
</span></span><span style=display:flex><span>npm run test
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Yarn Package Manager</span>
</span></span><span style=display:flex><span>yarn test
</span></span></code></pre></div><p>Once the tests run, you should see an output summary similar to this:</p><p><img src=./images/build-a-connect-four-library-in-typescript-part-3-1.png alt="uvu Test Output"></p><h2 id=checking-for-game-end>Checking For Game End</h2><p>With our logic in place for placing game tokens on the board, the last part of the functionality we need to add is checking for if the game is over. In the game of Connect Four, we know the game is over if one of the two following things occur: either the board is completely filled and no player got a Connect Four, or a single player got a Connect Four.</p><p>For now, we won&rsquo;t do a deep dive into checking if a player has won the game, and instead we will focus on adding a new internal method that will check if the board is full. To do this, add the following code to the <code>src/connect-four.ts</code> file:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * Checks if the last played game piece resulted in a player winning the game by getting four in a row,
</span></span></span><span style=display:flex><span><span style=color:#75715e> * either in a column, row, or diagonal. If after the last piece is placed and there are no remaining game
</span></span></span><span style=display:flex><span><span style=color:#75715e> * spots left, the game ends in a draw and the game is considered over.
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>checkForGameEnd</span>(<span style=color:#a6e22e>row</span>: <span style=color:#66d9ef>number</span>, <span style=color:#a6e22e>col</span>: <span style=color:#66d9ef>number</span>)<span style=color:#f92672>:</span> <span style=color:#66d9ef>void</span> {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// see if a player won based off of last piece that placed
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#75715e>// TODO
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>didPlayerWin</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>anyOpenSpots</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>board</span>[<span style=color:#ae81ff>0</span>].<span style=color:#a6e22e>some</span>((<span style=color:#a6e22e>cell</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>cell</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>anyOpenSpots</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>didPlayerWin</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>isGameOver</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Then, in the <code>makeMove</code> method, replace the <code>TODO</code> with a call to this new method. Replace the following code:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#75715e>// check if the game is finished
</span></span></span><span style=display:flex><span><span style=color:#75715e>// TODO
</span></span></span></code></pre></div><p>with the following:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#75715e>// check if the game is finished
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>this</span>.<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>checkForGameEnd</span>(<span style=color:#a6e22e>row</span>, <span style=color:#a6e22e>col</span>);
</span></span></code></pre></div><p>In the code above, we did the following:</p><ul><li>First, created a new private method called <code>checkForGameEnd</code>. This method has two parameters, the column and row that a game piece was placed at.</li><li>In this new method, we added a <code>TODO</code> for checking if a player has won the game and we created a new variable <code>didPlayerWin</code> to store this value. For now, we have set this value to always be <code>false</code>.</li><li>We then added a check to see if any of the cells in the top row of the board are empty by using the <code>.some</code> method on the array, and we checked if each cell was equal to <code>0</code>. If any of the cells in that row are equal to <code>0</code>, then we will return early from that loop.</li><li>At the end of this method, we determined if the game was over by check if the player won the game, or if the top row is filled.</li><li>Finally, we updated our <code>makeMove</code> method to call the new <code>checkForGameEnd</code> method.</li></ul><p>To make sure we didn&rsquo;t break anything, if you run the tests again, we should still see that all of them pass.</p><h2 id=wrap-up>Wrap Up</h2><p>We have started working on the logic for checking if the game is over, however we need to still add the logic for if the player has won.</p><p>In this article, we added the logic for allowing the player to place a game piece in a column, logic for validating this move, and we started adding the logic for if the game is over.</p><p>You can find the completed source code for this article here on GitHub:
<a href=https://github.com/devshareacademy/connect-four/tree/blog-post-3 target=_blank rel=noopener>Blog Post 3 Code</a>
.</p><p>If you run into any issues, please reach out via
<a href=https://github.com/devshareacademy/connect-four/discussions target=_blank rel=noopener>GitHub Discussions</a>
, or leave a comment down below.</p><p>In
<a href=/post/2023/02/build-a-connect-four-library-in-typescript-part-4/>part 4</a>
of this series, we will add the logic for checking if a player has won the game by getting a Connect Four.</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/html5/ rel=tag>HTML5</a></li><li class=tags__item><a class="tags__link btn" href=/tags/game-development/ rel=tag>Game Development</a></li><li class=tags__item><a class="tags__link btn" href=/tags/typescript/ rel=tag>TypeScript</a></li><li class=tags__item><a class="tags__link btn" href=/tags/tutorial/ rel=tag>Tutorial</a></li><li class=tags__item><a class="tags__link btn" href=/tags/connect-four/ rel=tag>Connect Four</a></li></ul></div></footer></article></main><div class="authorbox clearfix"><figure class=authorbox__avatar><img alt="Scott Westover avatar" src=https://secure.gravatar.com/avatar/d5b6863a31baa2c531949202b1de9c82 class=avatar height=90 width=90></figure><div class=authorbox__header><span class=authorbox__name>About Scott Westover</span></div><div class=authorbox__description>Scott Westover is a Software Developer who loves coding, writing tutorials, participating in game jams, and learning about new technologies. When he is not coding, he is either spending time with his wife and two kids or is reading a great book. Scott is looking to form connections and share his knowledge.</div></div><nav class="pager flex"><div class="pager__item pager__item--prev"><a class=pager__link href=/post/2023/01/build-a-connect-four-library-in-typescript-part-2/ rel=prev><span class=pager__subtitle>«&#8201;Previous</span><p class=pager__title>Build A Connect Four Library In TypeScript - Part 2</p></a></div><div class="pager__item pager__item--next"><a class=pager__link href=/post/2023/02/build-a-connect-four-library-in-typescript-part-4/ rel=next><span class=pager__subtitle>Next&#8201;»</span><p class=pager__title>Build A Connect Four Library In TypeScript - Part 4</p></a></div></nav><section class=comments><div id=gitment-comments></div></section><script src=https://utteranc.es/client.js repo=scottwestover/scottwestover.dev issue-term=pathname theme=github-light crossorigin=anonymous async></script></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2024 Scott Westover.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>